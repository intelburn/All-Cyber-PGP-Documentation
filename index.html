<html>
<head>
	<title>PGP Documentation</title>
</head>
<body>
<h1>General Overview</h1>
	<p>Thunderbird is a free and open-source mail client that is available for most desktop OS environments (Windows, Mac, Linux), or can be built from source if desired. It has a plug-in called Enigmail that acts as a graphical front end for the GNU Privacy Guard (GPG) implementation of the PGP standard for asymmetric cryptography as defined in RFC 4880.  Enigmail is open-source. It is available through both the Thunderbird add-in browser and as source on the Enigmail website. The combination of Thunderbird and Enigmail will work with most common email providers as long as they support either IMAP or POP3 and SMTP access to the account.
<h1>Links</h1>
	<h2>Official Sites</h2>
	<ul>
			<li><a href="https://www.mozilla.org/en-US/thunderbird/">Thunderbird</a></li>
			<li><a href="https://www.enigmail.net/">Enigmail</a></li>
		</ul>
	<h2>References</h2>
	<ul>
		<li><a href="https://en.wikipedia.org/wiki/GNU_Privacy_Guard">Wikipedia for GPG</a></li>
		<li><a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy">Wikipedia for PGP</a></li>
		<li><a href="https://tools.ietf.org/html/rfc4880">RFC 4880</a></li>
		<li><a href="https://gnupg.org/">Website for GPG</a></li>
	</ul>
<h1>FAQ</h1>
<dt><h2>Does this affect the other email on this account?</h2></dt>
        <dd>No. This only affects the email that is sent using Thunderbird and Enigmail. All other email is competely unoffected. However, if someone is sending encrypted email, you will only see the ciphertext (see Receiving Encrypted Email).</dd>
        <dt><h2>Can I receive email on my smartphone using this method.</h2></dt>
        <dd>Yes and no. If the email account is able to be used on your phone you will still be able to use it on your phone. You will be able to see the encrypted text come into the inbox on the phone. However this method does not allow you to either decrypt the email on the phone, or send encrypted email. Since I cannot vouch for any of the PGP implimentations on either iOS or Android, I am not supporting them.</dd>
        <dt><h2>I want to continue using Hushmail, is this possible with this new system?</h2></dt>
        <dd>Yes. Both Hushmail and the Engimail+Thunderbird solution here use the same encryption technology. They are 100% compatible in terms of sending and receiving encrypted email. This is assuming that the Enigmail user has uploaded their key to Hushmail, and that they have the public key of the Hushmail users in question. As the number of emails being sent to and from Enigmail increases, I would suggest posting your Hushmail key to the forum.</dd>
        <dt><h2>How does the security of Thunderbird+Enigmail compare to Hushmail?</h2></dt>
        <dd>There is no good, 100% answer to this question. The answer is it depends on how the private keys are managed. In Engimail, they private key NEVER leaves your computer. This means that the private key has the same level of security as your computer and the strength of the password of the private keys. In the case of Hushmail, the keys exist only on their servers. Depending on your level of trust of Hushmail this could be either a good thing or a bad thing. As far as the key strength itself, Hushmail uses a 2048-bit RSA key pair, and signs email using SHA-1. Engimail by defualt uses a 4096-bit RSA key pair and SHA-256 to sign email. It is possible to get Enigmail to use SHA-512 for email signing. Since both Thunderbird and Enigmail are opensource it is possible to get the source, audit it, compile it and use that version.</dd>

<h1>Tutorial</h1>
	<h2>Environment Description</h2>
		<p>This tutorial was written using a Windows 10 VM and Gmail. This should be mostly the same across OSs except for the installation of GPG, the interface between the graphical environments, and file pathing. Linux should already have GPG installed.
	<h2>Installing Thunderbird</h2>
		<p>The installation process for Thunderbird varies between the different OSs. It should be in most Linux distros. Official downloads can be found at the Thunderbird site linked above. The installation of Thunderbird follows the same procedure as is standard for the environment that you are using.
	<h2>Installing Enigmail from Inside Thunderbird</h2>
	<ol>
		<li>Open the hamburger menu in Thunderbird and click on Add-ons</li>
		<img src="screenshots/0.PNG"></img>
		<li>Click on Extensions and Type in Enigmail. Click on install the Add-on as shown below</li>
		<img src="screenshots/3.PNG"></img>
		<li>On starting the Enigmail Setup Wizard choose "I prefer an extended configuration"</li>
		<img src="screenshots/4.PNG"></img>
		<li>If prompted click on "Install GnuPG"</li>
		<img src="screenshots/5.PNG"></img>
		<li>Go through the GnuPG Wizard as normal until the "Choose Components". On this screen click on the check boxes for GPA and GpgEX as shown below.</li>
		<img src="screenshots/8.PNG"></img>
		<li>Finish going through the GnuPG Installation Wizard.</li>
		<li>If this is a new installation, choose the option for "I want to create a new key pair..." as shown below</li>
		<img src="screenshots/14.PNG"></img>
		<li>On the password screen shown below enter the desired password for the private key. This should be a strong password. As with all passwords, make this unique and do not share this password with anyone.</li>
		<img src="screenshots/15.PNG"></img>
		<li>Click on "Create Revocation Certificate"</li>
		<img src="screenshots/16.PNG"></img>
		<li>You will be prompted for the private key password created in step 8. Enter it on the screen shown below</li>
		<img src="screenshots/17.PNG"></img>
		<li>The system save dialog will come up, save the certificate revocation certificate somewhere where you can find it again</li>
	</ol>
	<h2>Key Management</h2>
	<Ul>
		<li>Click on the hamburger menu and choose Enigmail > Key Management. You should see a screen similar to what is shown below.</li>
		<img src="screenshots/22.PNG"></img>
		<li><h3>Exporting Keys</h3></li>
		<ol>
			<li>Select the key you wish to export.</li>
			<li>Click on File > Export Keys to File</li>
			<li>If you are exporting your own key you will see the screen shown below. It is important that you never let your private (or secret) key out of your control</li>
			<img src="screenshots/24.PNG"></img>
			<li>You will be shown a system save dialog. Save the key(s) somewhere where you can find them later</li>
		</ol>
		<li><h3>Importing Keys</h3></li>
		<ol>
				<li>Make a text file with the key inside with a file extension of .asc. An example of the text file is shown below</li>
				<img src="screenshots/27.PNG"></img>
				<li>Click on File > Import Keys from File</li>
				<li>In the system file chooser navigate to the file made in step 1 and choose it.</li>
				<li>You will get a message saying that the key was imported successfully. You will also see the new key in the Key Management Window</li>
			</ol>
		<li><h3>Importing Hushmail Keys</h3></li>
		<ol>
			<li>Go to the <a href="https://www.hushtools.com/hushtools2/">Hushtools website</a></li>
			<li>Click on "Key Management". You should be show page shown below.</li>
			<img src="screenshots/43.PNG"></img>
			<li>Enter the full Hushmail email address and click on "Retrieve public key". The Results are shown below.</li>
			<img src="screenshots/45.PNG"></img>
			<li>Copy the text in the "Public key:" pane into a text editor.</li>
			<li>Save the Key as .asc file in a location that you can find later.</li>
			<li>Import the key using the instructions in the Importing Keys section.</li>
		</ol>
		<li><h3>Importing Keys from the Forum</h3></li>
		<ol>
			<li>Log on to the <a href="d3di.com/forum">forum</a></li>
			<li>Go to the PGP Keys board at the bottom as shown below</li>
			<img src="screenshots/663.PNG"></img>
			<li>Open the post for the person whose key you want. The post should look like what is shown below.</li>
			<img src="screenshots/65.PNG"></img>
			<li>Copy all of the text begging and including the ----BEGIN PGP PUBLIC KEY BLOCK---- to the ending and including ----END PGP PUBLIC KEY BLOCK----</li>
			<li>Paste the text into your text editor of choice and save it as an .asc file</li>
			<li>Follow the instructions in Importing Keys</li>
		</ol>
		<li><h3>Uploading Your Public Key to Hushmail</h3></li>
		<ol>
			<li>Go to the <a href="https://www.hushtools.com/hushtools2/">Hushtools website</a></li>
			<li>Click on Key Management on the top bar</li>
			<li>Click on Upload a public key. You should see the page shown below.</li>
			<img src="screenshots/56.PNG"></img>
			<li>Open the Key Management Window in Thunderbird. It should look similar to what is shown below</li>
			<img src="screenshots/49.PNG"></img>
			<li>Right-click on your own key pair and select "Copy Public Keys to Clipboard" as shown below</li>
			<img src="screenshots/55.PNG"></img>
			<li>Back on the Hushtools page from step 3, Paste your key into the box for Step 1</li>
			<li>Click on the button called "Click here to check your key for email address" in step 2. You should see something similar to what is shown below.</li>
			<img src="screenshots/58.PNG"></img>
			<li>If your email is shown in the drop-down menu the click on "Click here to upload your public key" in Step 3</li>
			<li>You should receive an email asking you to confirm that you own the key. It should look like what is shown below.</li>
			<img src="screenshots/60.PNG"></img>
			<li>Navigate to the link from the email.</li>
			<li>On the Hushmail page shown below read the text then click on Activate My Key.</li>
			<img src="screenshots/61.PNG"></img>
		</ol>
		<li><h3>Posting Your Public Key to the Forum</h3></li>
		<ol>
			<li>Log on to the <a href="d3di.com/forum">Forum</a></li>
			<li>Navigate to the PGP Keys board that is at the bottom of the page as shown below.</li>
			<img src="screenshots/63.PNG"></img>
			<li>Start a new topic with your name as the Subject</li>
			<li>Open the Key Management Window in Thunderbird. It should look similar to what is shown below</li>
			<img src="screenshots/49.PNG"></img>
			<li>Right-click on your own key pair and select "Copy Public Keys to Clipboard" as shown below</li>
			<img src="screenshots/55.PNG"></img>
			<li>Go back to the topic from step 3</li>
			<li>Paste the text into the body of the post. You do not need to add any other message to the post. People only go to this board for public keys. The email is included in the key.</li>
		</ol>
	</ul>
	<h2>Sending Encrypted Email</h2>
	<ol>
		<li>Ensure that Enigmail has all of the public keys for everyone on the email. Refer to Key Management for more information</li>
		<li>Click on the Compose button on the Thunderbird main screen. You will be greeted by the compose window shown below. Notice that the email is currently Unencrypted</li>
		<img src="screenshots/36.PNG"></img>
		<li>Write the email. If Enigmail has the public keys for everyone the Compose window should look like this. Notice that the the message will be encrypted.</li>
		<img src="screenshots/37.PNG"><img>
	</ol>
	<h2>Receiving Encrypted Email</h2>
	<ol>
		<li>If you receive an email that looks like this, open it in Thunderbird with Enigmail installed.</li>
		<img src="screenshots/41.jpg"></img>
		<li>Upon clicking on the first encrypted email of the session you will be asked to enter the password for you private key in a dialog box like what is shown below. Enter it. It will not ask for the password again until you quit Thunderbird</li>
		<img src="screenshots/39.PNG"></img>
		<li>After entering the password the email should look like this</li>
		<img src="screenshots/40.PNG"></img>
	</ol>
